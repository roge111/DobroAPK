# DobroAPK

Хэй!

Если ты тут, значит, тебе был предоставлен доступ к проекту «ДобродеЯтель». Когда придумывалось название, то была допущена грамматическая ошибка. И было решено эту ошибку оставить как фишку.
Поскольку мой проект как идея уже был представлен в общество в 2020 году, то плагиат проекта ЗАПРЕЩЁН законодательством. 

### Что такое «ДобродеЯтель»?
---

Это проект, продукты которого должны работать на благо обществу. У проекта изначально два продукта: сайт для поиска волонтеров и беспилотник для поиска людей, которые заблудились вне города. 

### Требования
---

Версия DobroAPK 1.0 будет покрывать несколько базовых требований.

1. `Авторизация/Регистрация` — пользователь сможет зарегистрироваться на сайте, а в дальнейшем и авторизовываться. 
2. `Поиск пользователя` — одни пользователи смогут искать других пользователей через поисковую строку.
3. `Редактирование контактов` — пользователи могут изменить свои контакты, чтобы с ними могли связаться.
4. `Редактирование информации о себе` — можно оставить немного информации о себе.
5. `Редактирование хобби` — можно рассказать о своем хобби.
6. `Изменение и добавление аватарки` — можно поставить любую фотографию.
7. `Статистика` — пользователи могут видеть статистику: количества волонтеров или количества пунктов приема для переработки мусора.
(возможны добавления новых требований для расширения функционала)

### Как реализовывается?
----
Здесь я кратко опишу программы.

## DatabaseManager
Данный класс используется для установления контакта с базой данных, ведь вся работа сайта завязана на работе через базу данных. 
`query_database` — это метод для отправки SQL-запросов в базу данных и возврата результата работы. Флаг `reg` требуется для информирования того, ожидается ли возврат от запроса или нет.
`_connect` — метод установки соединения с базой данных по определенным параметрам: `host`, `port`, `dbname` (имя базы), `user` (имя пользователя базы данных), `password` (пароль для подключения), `client_encoding` (для изменения кодировки, чтобы воспринимала русский язык).

## UserInfo
Этот класс используется для работы с информацией о пользователе. 
`_check_login` — метод, который проверяет введенный логин на существование. Это позволяет обеспечить уникальность каждого логина.
`_check_null` — метод, который проверяет на пустоту запрос об изменении информации. Это полезно для того, что если пользователь данное поле не изменяет, то данные этого поля сохранились. Например, если мы меняем ФИО, то не должны сброисться данные о контактах и т. д.
`_allowed_file` — метод проверки файла фотографии на допустимое расширение.

`update_user` — метод изменения данных пользователя.
`load_image` — метод добавления фотографии на сервер.

### UserService

Класс, который реализует методы регистрации и авторизации пользователя.

`_check_login` — проверка логина на уникальность.
`register` — метод регистрации пользователя с присвоением ему уникального id, добавление в таблицы базы данных: таблица с id, логином и паролем, и таблица с id, логином и прочей информации (без пароля). Пароль хэшируется.
`login` — метод для авторизации пользователя.

### registerLogin

Это программный код с регистрацией и авторизацией. Тут используется FastAPI для приема запросов из frontend. 

`app` — это переменная, что позволяет использовать методы из FastAPI. Основные методы: post и get. `post` — это метод, что устанавливает адрес, по которому потом отправляються post-запросы из html. 
`root` — данная функция позволяет указать то, из какого файла принимаються запросы.
`add_middlware` — метод, который разрешает запросы с протов: "http://127.0.0.1:5500", "http://localhost:5500". Это сейчас позволяет запускать проект с Live Server из Visual Studio Code. 
`register` — это код, который использует класс `UserService` и его метод `register`.
`logIn` — это функция, которая использует метод `login` из того же класса.

### personalAccountUpdate

`update_information` — функция, что использует метод `update_user` из класса `UserInfo`.

### loadImage

`update_image_user` — функция, которая принимает запросы по адресу `/upImage` и использует метод `load_image_user` из класса `UserInfo`.

### Frontend

Тут особо описывать нечего. 

`register.html` — это страница регистрации.
`updateInformation.html` — страница редакции информации.
`main.html` — пока это код с кнопкой загрузки фото.



Спасибо, что посомтрел проект. До скорого !

![](https://media1.tenor.com/m/PLIr_VkF6ywAAAAC/ghostedvpn-hacker-cat.gif)
